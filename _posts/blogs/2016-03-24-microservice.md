---
layout: post
categories: [blog, sundry]
tags : [architecture, microservice]
title: 微服务
---
{% include JB/setup %}

---

* 单一庞大(Monolithic)应用不足

  * 逐渐变大, 几年后变成巨大怪物
  * 开发团队痛苦, 敏捷开发和部署举步维艰, 任何单一开发都不可能搞懂, 团队士气走下坡
  * 降低开发速度, 启动时间加长
  * 复杂而巨大的单体式应用也不利于持续性开发
  * 单体式应用在不同模块发生资源冲突时，扩展将会非常困难 (比如数据都只用一种, 版本也只能一致)
  * 可靠性降低, bug(如内存泄露)将相互影响
  * 单体式应用使得采用新架构和语言非常困难 (比如一个组件, 在一个小应用升级替换非常容易, 但是在大应用上就很难, 要避免影响所有现有功能变得非常困难)

  一开始你有一个很成功的关键业务应用，后来就变成了一个巨大的，无法理解的怪物。因为采用过时的，效率低的技术，使得雇佣有潜力的开发者很困难。应用无法扩展，可靠性很低，最终，敏捷性开发和部署变的无法完成

* 微服务在3d模型中的定位

  <img src="/assets/images/microservice/3d.png" />

  * Y轴代表将应用分解为微服务 (不同服务拆开)
  * X轴代表运行多个隐藏在负载均衡器之后的实例 (负载均衡+集群)
  * Z轴将服务分区 (相同服务分区, 拆小)

* 不像传统多个服务共享一个数据库，微服务架构每个服务都有自己的数据库 (好难)

* 微服务的好处

  * 单个服务很容易开发、理解和维护
  * 每个服务都可以有专门开发团队来开发。开发者可以自由选择开发技术，提供API服务; 重写重构,技术迭代变得不是很困难
  * 易于独立部署, AB测试，持续化部署
  * 每个服务独立扩展

* 微服务架构的不足

  * there are no silver bullets
  * 微服务应用是分布式系统，由此会带来固有的复杂性
  * 因为数据分区, 也因为CAP理论, 微服务不得不使用最终一致性方案, 因此对开发要求更高
  * 单体应用容易测试, 微服务测试复杂度提高, 需要各个微服务的stubs
  * 改动的影响将波及很多应用, 不过这是面向服务架构的特点
  * 服务拆分后, 服务增多, 部署难道和工作量增加



---

## 参考资料

* [微服务实战（一）：微服务架构的优势与不足](http://dockone.io/article/394)
